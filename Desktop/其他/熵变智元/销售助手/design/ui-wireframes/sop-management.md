# SOP任务管理 (SOP Task Management) 设计规格

## 页面概述
SOP任务管理页面允许用户创建、编辑和监控标准作业程序，实现销售流程的自动化和标准化。

## 主列表页面设计

### 页面布局
```
┌────────────────────────────────────────────────────────────────────┐
│  📋 SOP任务管理                                    [+ 创建新任务]    │
├────────────────────────────────────────────────────────────────────┤
│  🔍 搜索: [任务名称...] 📅 [时间筛选▼] 🏷️ [状态筛选▼] 🔄 [刷新]  │
├────────────────────────────────────────────────────────────────────┤
│                                                                   │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │  🔄 新客户破冰SOP                        ● 进行中           │  │
│  │  📋 针对新添加好友的3天跟进流程                             │  │
│  │  👥 目标: 新好友 (12人)  📅 创建: 2024-01-15               │  │
│  │  📊 执行统计: 已完成 8/15 步骤                             │  │
│  │  [编辑] [暂停] [查看详情] [删除]                           │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │  📈 产品推广SOP                         ⏸️ 已暂停          │  │
│  │  📋 高意向客户的产品介绍和案例分享                           │  │
│  │  👥 目标: 高意向客户 (5人)  📅 创建: 2024-01-10             │  │
│  │  📊 执行统计: 已完成 3/8 步骤                              │  │
│  │  [编辑] [启动] [查看详情] [删除]                           │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
└────────────────────────────────────────────────────────────────────┘
```

## 创建/编辑任务 - 分步向导设计

### Step 1: 基本信息
```
┌────────────────────────────────────────────────────────────────────┐
│  📝 创建SOP任务 - 基本信息 (1/4)                                    │
├────────────────────────────────────────────────────────────────────┤
│                                                                   │
│  任务名称 *                                                        │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 新客户破冰SOP                                              │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  任务描述                                                          │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 针对新添加好友的标准化跟进流程，包含问候、介绍、案例分享等...  │  │
│  │                                                            │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  目标类型 *                                                        │
│  ○ 好友   ● 群组   ○ 标签分组                                     │
│                                                                   │
│                                    [上一步] [下一步: 选择目标] │
└────────────────────────────────────────────────────────────────────┘
```

### Step 2: 选择目标
```
┌────────────────────────────────────────────────────────────────────┐
│  👥 创建SOP任务 - 选择目标 (2/4)                                    │
├────────────────────────────────────────────────────────────────────┤
│                                                                   │
│  执行账号 *                                                        │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ ☑️ 张经理微信 (zhangJL)    ☑️ 李销售微信 (lixs_001)          │  │
│  │ ☐ 王助理微信 (wangzl)      ☐ 赵顾问微信 (zhaogw)            │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  目标群组 *                                                        │
│  🔍 [搜索群组...]                                                 │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ ☑️ 产品咨询群 (125人)                                        │  │
│  │ ☑️ VIP客户群 (45人)                                          │  │
│  │ ☐ 体验用户群 (89人)                                          │  │
│  │ ☐ 合作伙伴群 (23人)                                          │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  已选择: 2个执行账号, 2个目标群组                                   │
│                                                                   │
│                                 [上一步] [下一步: 设计流程] │
└────────────────────────────────────────────────────────────────────┘
```

### Step 3: 设计流程 (核心功能)
```
┌────────────────────────────────────────────────────────────────────┐
│  ⚙️ 创建SOP任务 - 设计流程 (3/4)                                   │
├────────────────────────────────────────────────────────────────────┤
│                                                                   │
│  流程时间线                                      [+ 添加步骤]      │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │                                                            │  │
│  │  📅 任务开始 ──────────────────────────────────────────────  │  │
│  │       │                                                   │  │
│  │       │ 立即执行                                           │  │
│  │       ▼                                                   │  │
│  │  ┌─────────────────────────────────────────────────────┐   │  │
│  │  │ 步骤1: 欢迎问候                              [编辑] │   │  │
│  │  │ ⏰ 任务开始后 立即 执行                             │   │  │
│  │  │ 📝 物料: "欢迎加入我们的产品讨论群..."              │   │  │
│  │  │ 🎯 条件: 无前置条件                               │   │  │
│  │  └─────────────────────────────────────────────────────┘   │  │
│  │       │                                                   │  │
│  │       │ 等待 1 天                                         │  │
│  │       ▼                                                   │  │
│  │  ┌─────────────────────────────────────────────────────┐   │  │
│  │  │ 步骤2: 产品介绍                              [编辑] │   │  │
│  │  │ ⏰ 任务开始后 1天 的 09:30 执行                     │   │  │
│  │  │ 📝 物料: "我们的产品特色介绍.pdf"                   │   │  │
│  │  │ 🎯 条件: 如果群内有新成员发言                       │   │  │
│  │  └─────────────────────────────────────────────────────┘   │  │
│  │       │                                                   │  │
│  │       │ 等待 2 天                                         │  │
│  │       ▼                                                   │  │
│  │  ┌─────────────────────────────────────────────────────┐   │  │
│  │  │ 步骤3: 案例分享                              [编辑] │   │  │
│  │  │ ⏰ 任务开始后 3天 的 14:00 执行                     │   │  │
│  │  │ 📝 物料: "客户成功案例分享"                         │   │  │
│  │  │ 🎯 条件: 无条件执行                               │   │  │
│  │  └─────────────────────────────────────────────────────┘   │  │
│  │                                                            │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│                              [上一步] [下一步: 预览确认] │
└────────────────────────────────────────────────────────────────────┘
```

### 步骤编辑弹窗
```
┌────────────────────────────────────────────────────────────────────┐
│  ✏️ 编辑步骤: 欢迎问候                                    [关闭 ✕] │
├────────────────────────────────────────────────────────────────────┤
│                                                                   │
│  步骤名称 *                                                        │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 欢迎问候                                                   │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  触发时间 *                                                        │
│  任务开始后 [0] 天 [立即执行 ▼] 执行                                │
│                                                                   │
│  发送内容 *                                                        │
│  ○ 选择物料库内容   ● 自定义文本                                   │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 欢迎大家加入我们的产品讨论群！                               │  │
│  │ 这里会定期分享产品更新和使用技巧，                           │  │
│  │ 有任何问题随时提问哦~ 😊                                    │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  执行条件                                                          │
│  ○ 无条件执行   ○ 有新成员时   ● 自定义条件                       │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 群成员数 > 10                                              │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│                                            [取消] [保存] │
└────────────────────────────────────────────────────────────────────┘
```

### Step 4: 预览确认
```
┌────────────────────────────────────────────────────────────────────┐
│  👀 创建SOP任务 - 预览确认 (4/4)                                    │
├────────────────────────────────────────────────────────────────────┤
│                                                                   │
│  📋 任务概览                                                       │
│  • 任务名称: 新客户破冰SOP                                         │
│  • 目标类型: 群组                                                 │
│  • 执行账号: 2个微信账号                                           │
│  • 目标群组: 2个群组                                               │
│  • 总步骤数: 3个步骤                                               │
│                                                                   │
│  📅 执行计划                                                       │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ Day 0 - 立即: 欢迎问候                                      │  │
│  │ Day 1 - 09:30: 产品介绍 (条件: 有新成员发言)                │  │
│  │ Day 3 - 14:00: 案例分享                                    │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  🎯 预期效果                                                       │
│  • 提升新成员的参与度和产品认知                                     │
│  • 标准化群组运营流程                                               │
│  • 减少人工干预，提高效率                                           │
│                                                                   │
│  ⚠️ 重要提醒                                                       │
│  • 任务创建后将立即开始执行                                         │
│  • 确保所选微信账号处于在线状态                                     │
│  • 建议先在小范围测试后再大规模应用                                 │
│                                                                   │
│                               [返回修改] [确认创建] │
└────────────────────────────────────────────────────────────────────┘
```

## 任务详情页面

### 任务监控Dashboard
```
┌────────────────────────────────────────────────────────────────────┐
│  📊 新客户破冰SOP - 执行详情                          [编辑] [暂停] │
├────────────────────────────────────────────────────────────────────┤
│                                                                   │
│  📈 执行统计                                                       │
│  ┌─────────────┬─────────────┬─────────────┬─────────────┐          │
│  │   总执行次数 │   成功次数   │   失败次数   │   成功率    │          │
│  │     156     │     142     │      14     │    91.0%   │          │
│  └─────────────┴─────────────┴─────────────┴─────────────┘          │
│                                                                   │
│  📅 执行时间线                                                     │
│  [今天] [本周] [本月] [自定义]                                     │
│                                                                   │
│  🔍 执行日志                                          [导出日志]   │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 2024-01-20 09:30 ✅ 步骤2完成 - 产品咨询群 - 张经理微信      │  │
│  │ 2024-01-20 09:30 ❌ 步骤2失败 - VIP客户群 - 李销售微信      │  │
│  │ 2024-01-19 00:00 ✅ 步骤1完成 - 产品咨询群 - 张经理微信      │  │
│  │ 2024-01-19 00:00 ✅ 步骤1完成 - VIP客户群 - 李销售微信      │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
└────────────────────────────────────────────────────────────────────┘
```

## 交互设计要点

### 状态管理
- **进行中**: 绿色指示器，正常执行
- **已暂停**: 橙色指示器，手动暂停
- **已完成**: 蓝色指示器，所有步骤完成
- **异常**: 红色指示器，执行出错

### 操作权限
- **创建者**: 完全权限（编辑、删除、暂停）
- **管理员**: 查看、暂停权限
- **普通用户**: 仅查看权限

### 批量操作
- 支持批量暂停/启动任务
- 批量删除已完成任务
- 批量导出执行报告

## 响应式设计

### 移动端适配
- 向导流程改为垂直滚动
- 时间线采用垂直布局
- 操作按钮大小适配触屏

### 平板端适配
- 保持主要布局结构
- 适当调整间距和字体大小

