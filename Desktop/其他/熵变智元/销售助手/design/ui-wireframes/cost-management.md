# 算力管理 (Computing Power Management) 设计规格

## 页面概述
算力管理是系统的战略性核心模块，负责监控、分配和控制AI模型调用的成本，确保项目的商业可行性。

## 主控面板设计

### 顶部概览卡片
```
┌────────────────────────────────────────────────────────────────────┐
│  💰 算力成本管理中心                                                 │
├────────────────────────────────────────────────────────────────────┤
│  📊 本月核心指标                                                   │
│  ┌─────────────┬─────────────┬─────────────┬─────────────┐          │
│  │  总消耗成本  │  Token用量  │  API调用次数 │  平均成本   │          │
│  │  $125.67    │   2.8M     │   15,420    │   $0.008   │          │
│  │  📈 +15.2%  │  📊 +22.3% │  🔄 +18.7%  │  📉 -3.1%  │          │
│  └─────────────┴─────────────┴─────────────┴─────────────┘          │
│                                                                   │
│  🎯 预算状态                                                       │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 组织总预算: $200.00  已用: $125.67 (62.8%)  剩余: $74.33    │  │
│  │ ████████████████████████████████████████▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒    │  │
│  │ 🟢 状态正常  📅 距离月底还有 10天                            │  │
│  └─────────────────────────────────────────────────────────────┘  │
└────────────────────────────────────────────────────────────────────┘
```

### 成本趋势分析
```
┌────────────────────────────────────────────────────────────────────┐
│  📈 成本趋势分析                        [日▼] [周▼] [月▼] [自定义] │
├────────────────────────────────────────────────────────────────────┤
│                                                                   │
│  💲 每日成本趋势 (最近30天)                                        │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │  15$                                                       │  │
│  │  12$    ●                              ●                   │  │
│  │   9$      ●   ●         ●   ●       ●     ●               │  │
│  │   6$        ●   ●     ●       ●   ●         ●   ●         │  │
│  │   3$          ●   ● ●           ●               ●   ●     │  │
│  │   0$ ──────────────────────────────────────────────────────  │  │
│  │     1/1  1/7  1/14  1/21  1/28  2/4  2/11  2/18  2/25     │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  🔍 成本分布                                                       │
│  ┌───────────────────┬───────────────────┬─────────────────────┐  │
│  │   按模型分布       │    按用户分布      │    按功能分布        │  │
│  │ ┌──────────────┐  │ ┌──────────────┐  │ ┌─────────────────┐  │  │
│  │ │ GPT-4o: 45%  │  │ │ 张三: 28%    │  │ │ 聊天回复: 60%   │  │
│  │ │ Claude: 30%  │  │ │ 李四: 22%    │  │ │ 朋友圈评论: 25% │  │
│  │ │ Doubao: 25%  │  │ │ 王五: 20%    │  │ │ 内容生成: 15%   │  │
│  │ └──────────────┘  │ │ 其他: 30%    │  │ └─────────────────┘  │
│  │                  │ └──────────────┘  │                    │  │
│  └───────────────────┴───────────────────┴─────────────────────┘  │
└────────────────────────────────────────────────────────────────────┘
```

## 用户配额管理

### 用户列表与配额设置
```
┌────────────────────────────────────────────────────────────────────┐
│  👥 用户算力配额管理                                    [批量设置]  │
├────────────────────────────────────────────────────────────────────┤
│  🔍 [搜索用户...] 🏢 [部门筛选▼] 📊 [使用率排序▼] 🔄 [刷新]       │
├────────────────────────────────────────────────────────────────────┤
│                                                                   │
│ 员工姓名      │ 部门     │ 月度配额  │ 本月已用  │ 使用率    │ 操作   │
├──────────────┼─────────┼─────────┼─────────┼──────────┼────────┤
│ 👤 张三       │ 销售部   │ $50.00  │ $32.45   │ ████████  │ [编辑] │
│ 高级销售      │         │         │          │ 64.9% 🟢  │ [详情] │
├──────────────┼─────────┼─────────┼─────────┼──────────┼────────┤
│ 👤 李四       │ 销售部   │ $40.00  │ $38.20   │ ████████  │ [编辑] │
│ 销售经理      │         │         │          │ 95.5% 🟠  │ [详情] │
├──────────────┼─────────┼─────────┼─────────┼──────────┼────────┤
│ 👤 王五       │ 客服部   │ $30.00  │ $15.80   │ ████████  │ [编辑] │
│ 客服专员      │         │         │          │ 52.7% 🟢  │ [详情] │
├──────────────┼─────────┼─────────┼─────────┼──────────┼────────┤
│ 👤 赵六       │ 咨询部   │ $35.00  │ $35.60   │ ████████  │ [编辑] │
│ 咨询顾问      │         │         │          │ 101.7% 🔴 │ [详情] │
└──────────────┴─────────┴─────────┴─────────┴──────────┴────────┘
```

### 编辑用户配额弹窗
```
┌────────────────────────────────────────────────────────────────────┐
│  ✏️ 编辑配额 - 张三                                     [关闭 ✕]  │
├────────────────────────────────────────────────────────────────────┤
│                                                                   │
│  👤 用户信息                                                       │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 姓名: 张三                                                  │  │
│  │ 部门: 销售部                                                │  │
│  │ 角色: 高级销售                                              │  │
│  │ 入职时间: 2023-06-15                                        │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  💰 配额设置                                                       │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 当前月度配额 *                                               │  │
│  │ ┌─────────────────────────────────────────────────────────┐ │  │
│  │ │ $ 50.00                                                │ │  │
│  │ └─────────────────────────────────────────────────────────┘ │  │
│  │                                                            │  │
│  │ 配额生效时间                                                │  │
│  │ ○ 立即生效    ● 下月生效                                   │  │
│  │                                                            │  │
│  │ 超额处理方式                                                │  │
│  │ ○ 阻止调用    ● 发送警告    ○ 自动扩容                     │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  🔔 告警设置                                                       │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ ☑️ 启用配额告警                                              │  │
│  │ 告警阈值: [80]% [90]% [95]%                                  │  │
│  │                                                            │  │
│  │ 告警方式:                                                   │  │
│  │ ☑️ 邮件通知    ☑️ 系统消息    ☐ 短信通知                    │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  📊 历史使用情况                                                   │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 上月使用: $45.20 (90.4%)                                    │  │
│  │ 最高月份: $52.30 (2023年12月)                               │  │
│  │ 平均月用量: $38.50                                          │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│                                            [取消] [保存] │
└────────────────────────────────────────────────────────────────────┘
```

## 实时监控与告警

### 告警中心
```
┌────────────────────────────────────────────────────────────────────┐
│  🚨 实时告警监控                                        [设置规则]  │
├────────────────────────────────────────────────────────────────────┤
│                                                                   │
│  🔴 紧急告警                                                       │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 💰 赵六配额超限 (101.7%)                    📅 2分钟前      │  │
│  │ 📊 本月成本已超预算$35.60/$35.00                           │  │
│  │ 🎯 建议: 暂停AI功能或增加配额                               │  │
│  │ [处理] [忽略] [联系用户]                                  │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  🟠 警告信息                                                       │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ ⚠️ 李四配额使用率达到95.5%               📅 10分钟前      │  │
│  │ 📊 预计3天后将达到配额上限                                  │  │
│  │ 🎯 建议: 提醒用户注意使用量                                 │  │
│  │ [已处理] [忽略] [发送提醒]                                │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  🟡 系统提醒                                                       │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 📈 组织总成本增长15.2%                   📅 1小时前        │  │
│  │ 📊 较上月同期有显著增长                                     │  │
│  │ 🎯 建议: 查看成本分析报告                                   │  │
│  │ [查看详情] [忽略]                                         │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
└────────────────────────────────────────────────────────────────────┘
```

## 详细成本分析

### 成本明细报告
```
┌────────────────────────────────────────────────────────────────────┐
│  📋 成本明细分析                    [导出报告] [定制报告] [订阅]    │
├────────────────────────────────────────────────────────────────────┤
│  📅 [2024年1月] [按天▼] [全部用户▼] [全部模型▼]               │
├────────────────────────────────────────────────────────────────────┤
│                                                                   │
│ 日期      │ 用户   │ 模型      │ Input   │ Output  │ 成本    │ 功能  │
│          │       │          │ Tokens  │ Tokens  │        │      │
├──────────┼───────┼──────────┼─────────┼─────────┼────────┼──────┤
│ 01-20    │ 张三   │ GPT-4o   │ 2,456   │ 892     │ $0.156 │ 聊天  │
│ 14:25:33 │       │          │         │         │        │      │
├──────────┼───────┼──────────┼─────────┼─────────┼────────┼──────┤
│ 01-20    │ 李四   │ Claude   │ 1,823   │ 567     │ $0.089 │ 评论  │
│ 14:22:15 │       │          │         │         │        │      │
├──────────┼───────┼──────────┼─────────┼─────────┼────────┼──────┤
│ 01-20    │ 王五   │ Doubao   │ 3,145   │ 1,234   │ $0.045 │ 分析  │
│ 14:18:42 │       │          │         │         │        │      │
├──────────┼───────┼──────────┼─────────┼─────────┼────────┼──────┤
│ 01-20    │ 张三   │ GPT-4o   │ 1,967   │ 743     │ $0.124 │ SOP   │
│ 13:56:28 │       │          │         │         │        │      │
├──────────┼───────┼──────────┼─────────┼─────────┼────────┼──────┤
│          │       │          │ 总计:   │ 总计:   │ $0.414 │      │
│          │       │          │ 9,391   │ 3,436   │        │      │
└──────────┴───────┴──────────┴─────────┴─────────┴────────┴──────┘
```

## 预算规划与预测

### 预算管理面板
```
┌────────────────────────────────────────────────────────────────────┐
│  📊 预算规划管理                                        [编辑预算]  │
├────────────────────────────────────────────────────────────────────┤
│                                                                   │
│  💰 当前预算配置                                                   │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 🏢 组织总预算: $500.00/月                                   │  │
│  │ 👥 用户分配预算: $400.00 (80%)                              │  │
│  │ 🔧 系统预留预算: $100.00 (20%)                              │  │
│  │                                                            │  │
│  │ 📈 预算分配策略:                                            │  │
│  │ • 销售部: 60% ($240.00)                                   │  │
│  │ • 客服部: 25% ($100.00)                                   │  │
│  │ • 咨询部: 15% ($60.00)                                    │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  🔮 成本预测                                                       │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 基于当前使用趋势预测:                                        │  │
│  │                                                            │  │
│  │ 📅 本月预计成本: $185.30 (92.7%)                           │  │
│  │ 📅 下月预计成本: $198.45 (99.2%)                           │  │
│  │ 📅 季度预计成本: $580.50 (96.8%)                           │  │
│  │                                                            │  │
│  │ ⚠️ 风险提醒:                                                │  │
│  │ • 下月预算可能接近上限                                      │  │
│  │ • 建议适当增加预算或优化使用                                 │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  🎯 优化建议                                                       │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 1. 💡 使用更便宜的模型处理简单任务 (节省~15%)                │  │
│  │ 2. 🔧 增加缓存减少重复计算 (节省~8%)                         │  │
│  │ 3. ⏰ 优化prompt长度和复杂度 (节省~12%)                      │  │
│  │ 4. 📊 实施更精细的配额管理 (节省~10%)                        │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
└────────────────────────────────────────────────────────────────────┘
```

## 模型价格管理

### 价格配置面板
```
┌────────────────────────────────────────────────────────────────────┐
│  💲 AI模型价格管理                                      [添加模型]  │
├────────────────────────────────────────────────────────────────────┤
│                                                                   │
│ 模型名称        │ 供应商  │ Input价格     │ Output价格    │ 状态  │ 操作 │
│                │        │ ($/1K tokens) │ ($/1K tokens) │      │     │
├────────────────┼────────┼──────────────┼──────────────┼──────┼─────┤
│ GPT-4o         │ OpenAI │ $0.005       │ $0.015       │ 🟢启用│[编辑]│
│ 主力模型        │        │              │              │      │[停用]│
├────────────────┼────────┼──────────────┼──────────────┼──────┼─────┤
│ Claude-3.5     │ Anthropic│ $0.003     │ $0.015       │ 🟢启用│[编辑]│
│ 备用模型        │        │              │              │      │[停用]│
├────────────────┼────────┼──────────────┼──────────────┼──────┼─────┤
│ Doubao-pro-32k │ ByteDance│ $0.0008    │ $0.002       │ 🟢启用│[编辑]│
│ 经济模型        │        │              │              │      │[停用]│
├────────────────┼────────┼──────────────┼──────────────┼──────┼─────┤
│ GPT-3.5-turbo  │ OpenAI │ $0.001       │ $0.002       │ ⚪停用│[编辑]│
│ 测试模型        │        │              │              │      │[启用]│
└────────────────┴────────┴──────────────┴──────────────┴──────┴─────┘
```

## 数据导出与报告

### 报告生成器
```
┌────────────────────────────────────────────────────────────────────┐
│  📊 生成成本报告                                        [关闭 ✕]  │
├────────────────────────────────────────────────────────────────────┤
│                                                                   │
│  📅 报告时间范围                                                   │
│  ○ 最近7天    ● 最近30天    ○ 本季度    ○ 自定义                  │
│                                                                   │
│  📋 报告内容                                                       │
│  ☑️ 成本概览与趋势分析                                              │
│  ☑️ 用户使用情况排行                                                │
│  ☑️ 模型成本分布分析                                                │
│  ☑️ 功能模块费用明细                                                │
│  ☐ 异常使用检测报告                                                │
│  ☐ 成本优化建议                                                    │
│                                                                   │
│  👥 报告对象                                                       │
│  ☑️ 全部用户    ☐ 指定部门    ☐ 指定用户                          │
│                                                                   │
│  📄 输出格式                                                       │
│  ● Excel表格    ○ PDF报告    ○ 在线仪表盘                         │
│                                                                   │
│  📧 分享设置                                                       │
│  ☑️ 邮件发送给管理员                                                │
│  ☐ 定期生成 (每月1日)                                              │
│                                                                   │
│                                        [预览] [生成] │
└────────────────────────────────────────────────────────────────────┘
```

## 移动端适配特点

### 关键指标卡片
- 紧凑的数据展示
- 一键切换时间周期
- 下拉刷新数据

### 告警通知
- 推送通知支持
- 关键告警置顶显示
- 快速操作按钮

## 实时功能实现

### WebSocket数据推送
- 实时成本更新
- 配额使用率变化
- 告警状态推送
- 用户活动监控

### 自动化功能
- 配额耗尽自动暂停
- 异常成本自动告警
- 定期报告生成
- 预算超支预警

