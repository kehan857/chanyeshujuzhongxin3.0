# 设备管理 (Device Management) 设计规格

## 页面概述
设备管理是后台管理的核心模块，负责监控所有托管微信账号的状态，确保系统稳定运行。

## 主页面布局

### 顶部控制栏
```
┌────────────────────────────────────────────────────────────────────┐
│  📱 设备管理                                                        │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 🔍 [搜索账号/昵称...] 🏷️ [状态筛选▼] 👤 [员工筛选▼] 🔄刷新 │  │
│  │                                              [+ 添加设备]  │  │
│  └─────────────────────────────────────────────────────────────┘  │
├────────────────────────────────────────────────────────────────────┤
│  📊 状态概览                                                       │
│  ┌─────────────┬─────────────┬─────────────┬─────────────┐          │
│  │  总设备数    │   在线设备   │   离线设备   │   异常设备   │          │
│  │     12      │  🟢 8 台    │  ⚪ 3 台    │  🔴 1 台    │          │
│  └─────────────┴─────────────┴─────────────┴─────────────┘          │
└────────────────────────────────────────────────────────────────────┘
```

### 设备列表表格
```
┌────────────────────────────────────────────────────────────────────┐
│ 微信信息           │ 归属员工 │ 状态      │ 上线时长  │ 操作        │
├────────────────────┼─────────┼──────────┼─────────┼─────────────┤
│ 👤 张经理           │ 张三     │ 🟢 在线   │ 2天3小时 │ [强制下线]   │
│ 📱 zhangjl_001     │ 销售部   │          │         │ [查看日志]   │
│ 🌐 IP: 北京        │         │          │         │ [编辑备注]   │
├────────────────────┼─────────┼──────────┼─────────┼─────────────┤
│ 👤 李销售           │ 李四     │ ⚪ 离线   │ 已离线   │ [获取二维码] │
│ 📱 lixs_002        │ 销售部   │          │ 30分钟  │ [查看日志]   │
│ 🌐 IP: 上海        │         │          │         │ [删除设备]   │
├────────────────────┼─────────┼──────────┼─────────┼─────────────┤
│ 👤 王助理           │ 王五     │ 🟠 等待   │ -       │ [重新登录]   │
│ 📱 wangzl_003      │ 客服部   │ 扫码登录  │         │ [查看二维码] │
│ 🌐 IP: 深圳        │         │          │         │ [删除设备]   │
├────────────────────┼─────────┼──────────┼─────────┼─────────────┤
│ 👤 赵顾问           │ 赵六     │ 🔴 异常   │ 风控中   │ [联系管理员] │
│ 📱 zhaogw_004      │ 咨询部   │ 风控限制  │         │ [查看详情]   │
│ 🌐 IP: 广州        │         │          │         │ [暂停使用]   │
└────────────────────┴─────────┴──────────┴─────────┴─────────────┘
```

## 状态指示器详细设计

### 状态类型与颜色编码
```
🟢 在线 (ONLINE)
   - 颜色: #10B981 (绿色)
   - 描述: 设备正常在线，可正常收发消息

⚪ 离线 (OFFLINE) 
   - 颜色: #6B7280 (灰色)
   - 描述: 设备断开连接，无法收发消息

🟠 等待扫码 (AWAITING_RELOGIN)
   - 颜色: #F59E0B (橙色) 
   - 描述: 需要重新扫码登录

🔴 风控异常 (RISK_CONTROLLED)
   - 颜色: #EF4444 (红色)
   - 描述: 账号被微信风控，功能受限

🟣 已封禁 (BANNED)
   - 颜色: #8B5CF6 (紫色)
   - 描述: 账号被永久封禁
```

## 操作功能设计

### 获取登录二维码弹窗
```
┌────────────────────────────────────────────────────────────────────┐
│  📱 重新登录 - 李销售微信                                [关闭 ✕]  │
├────────────────────────────────────────────────────────────────────┤
│                                                                   │
│  📋 操作说明                                                       │
│  1. 请使用微信扫描下方二维码                                        │
│  2. 扫码后在手机上确认登录                                          │
│  3. 登录成功后系统将自动更新状态                                    │
│                                                                   │
│  📱 登录二维码                                                     │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │                                                            │  │
│  │           ██ ██████ ██ ████ ██████ ██                      │  │
│  │           ██ ██  ██ ██ ██ █ ██  ██ ██                      │  │
│  │           ██ ██████ ██ ██ █ ██████ ██                      │  │
│  │           ██ ██████ ██ ████ ██████ ██                      │  │
│  │                                                            │  │
│  │                  [微信登录二维码]                            │  │
│  │                                                            │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  ⏱️ 二维码状态: 有效 (剩余 4分30秒)                                │
│  📡 连接状态: 等待扫码中...                                        │
│                                                                   │
│  💡 温馨提示                                                       │
│  • 二维码5分钟内有效，过期需重新获取                                │
│  • 确保手机网络稳定                                                │
│  • 如多次登录失败，请联系管理员                                     │
│                                                                   │
│                                      [刷新二维码] [取消] │
└────────────────────────────────────────────────────────────────────┘
```

### 设备详情弹窗
```
┌────────────────────────────────────────────────────────────────────┐
│  📊 设备详情 - 张经理微信                               [关闭 ✕]  │
├────────────────────────────────────────────────────────────────────┤
│                                                                   │
│  📱 基本信息                                                       │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 微信昵称: 张经理                                             │  │
│  │ 微信号: zhangjl_001                                         │  │
│  │ 归属员工: 张三 (销售部)                                      │  │
│  │ 设备类型: Android                                           │  │
│  │ 微信版本: 8.0.32                                            │  │
│  │ 添加时间: 2024-01-10 10:30                                  │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  🌐 网络信息                                                       │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 当前IP: 192.168.1.100 (北京市朝阳区)                        │  │
│  │ 上次IP: 192.168.1.100 (北京市朝阳区)                        │  │
│  │ 网络类型: WiFi                                              │  │
│  │ 信号强度: 良好                                              │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  📈 使用统计 (本月)                                                │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 在线时长: 380小时 (96.8%)                                    │  │
│  │ 发送消息: 1,256条                                           │  │
│  │ 接收消息: 2,847条                                           │  │
│  │ 掉线次数: 3次                                               │  │
│  │ 最后活跃: 2024-01-20 15:30                                  │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  🔧 管理操作                                                       │
│  [修改备注] [重置密码] [强制下线] [删除设备]              │
│                                                                   │
└────────────────────────────────────────────────────────────────────┘
```

### 登录日志
```
┌────────────────────────────────────────────────────────────────────┐
│  📋 登录日志 - 张经理微信                               [关闭 ✕]  │
├────────────────────────────────────────────────────────────────────┤
│  📅 [今天] [本周] [本月] [自定义时间]                    [导出日志] │
├────────────────────────────────────────────────────────────────────┤
│                                                                   │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 2024-01-20 15:30:25 ✅ 正常在线                            │  │
│  │ IP: 192.168.1.100 (北京) | 设备: Android                   │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 2024-01-20 08:15:43 🔄 重新登录成功                        │  │
│  │ IP: 192.168.1.100 (北京) | 原因: 网络断开恢复               │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 2024-01-20 08:10:12 ⚠️ 连接断开                            │  │
│  │ IP: 192.168.1.100 (北京) | 原因: 网络不稳定                 │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 2024-01-19 22:30:15 🔚 主动下线                            │  │
│  │ IP: 192.168.1.100 (北京) | 操作人: 张三                    │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 2024-01-19 09:00:32 ✅ 登录成功                            │  │
│  │ IP: 192.168.1.100 (北京) | 方式: 二维码扫码                │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
└────────────────────────────────────────────────────────────────────┘
```

## 添加新设备流程

### 添加设备向导
```
┌────────────────────────────────────────────────────────────────────┐
│  ➕ 添加新设备 (1/3)                                    [关闭 ✕]  │
├────────────────────────────────────────────────────────────────────┤
│                                                                   │
│  📋 设备信息                                                       │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ 设备名称 *                                                  │  │
│  │ ┌─────────────────────────────────────────────────────────┐ │  │
│  │ │ 张经理微信                                              │ │  │
│  │ └─────────────────────────────────────────────────────────┘ │  │
│  │                                                            │  │
│  │ 归属员工 *                                                  │  │
│  │ ┌─────────────────────────────────────────────────────────┐ │  │
│  │ │ [选择员工 ▼] 张三 - 销售部                              │ │  │
│  │ └─────────────────────────────────────────────────────────┘ │  │
│  │                                                            │  │
│  │ 设备备注                                                    │  │
│  │ ┌─────────────────────────────────────────────────────────┐ │  │
│  │ │ 主要用于客户沟通和朋友圈营销                              │ │  │
│  │ └─────────────────────────────────────────────────────────┘ │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│  🔐 安全设置                                                       │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │ ☑️ 启用IP地址限制                                            │  │
│  │ ☑️ 启用异常登录提醒                                          │  │
│  │ ☐ 启用定时健康检查                                           │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                   │
│                                              [取消] [下一步] │
└────────────────────────────────────────────────────────────────────┘
```

## 批量操作功能

### 批量管理工具栏
```
┌────────────────────────────────────────────────────────────────────┐
│  已选择 3 个设备                                                    │
│  [全选] [取消全选] | [批量下线] [批量重启] [批量删除] [导出数据]     │
└────────────────────────────────────────────────────────────────────┘
```

## 实时监控面板

### WebSocket状态推送
- 设备在线状态实时更新
- 新消息数量实时显示
- 异常状态立即告警
- 网络质量实时监控

### 告警系统
```
┌────────────────────────────────────────────────────────────────────┐
│  🚨 实时告警                                           [查看全部]  │
├────────────────────────────────────────────────────────────────────┤
│  🔴 紧急: 李销售微信 异常掉线 (2分钟前)                            │
│  🟠 警告: 王助理微信 网络不稳定 (5分钟前)                          │
│  🟡 提醒: 赵顾问微信 需要重新登录 (10分钟前)                       │
└────────────────────────────────────────────────────────────────────┘
```

## 移动端适配

### 响应式表格
- 横向滚动支持
- 关键信息优先显示
- 操作按钮简化

### 移动端操作
- 长按显示上下文菜单
- 滑动操作快捷功能
- 语音播报状态更新

## 数据导出功能

### 导出选项
```
┌────────────────────────────────────────────────────────────────────┐
│  📊 导出设备数据                                        [关闭 ✕]  │
├────────────────────────────────────────────────────────────────────┤
│                                                                   │
│  📅 时间范围                                                       │
│  ○ 最近7天    ● 最近30天    ○ 自定义范围                          │
│                                                                   │
│  📋 导出内容                                                       │
│  ☑️ 设备基本信息    ☑️ 登录日志    ☑️ 使用统计                    │
│  ☐ 消息记录       ☐ 异常日志    ☐ 性能数据                      │
│                                                                   │
│  📄 文件格式                                                       │
│  ○ Excel (.xlsx)    ● CSV (.csv)    ○ PDF报告                    │
│                                                                   │
│                                       [预览] [导出] │
└────────────────────────────────────────────────────────────────────┘
```

